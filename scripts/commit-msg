#!/bin/bash

commit_msg_file=$1

commit_msg=$(cat $commit_msg_file)

# Get first line
first_line=$(echo "$commit_msg" | head -1)

# Check if it matches conventional commit: type(scope): lowercase description <=40 chars
if ! echo "$first_line" | grep -qE '^(feat|fix|docs|style|refactor|test|chore)(\(.+\))?: [a-z].{0,39}$'; then
    echo "Commit message does not follow conventional commit format."
    echo "Format: type(scope): lowercase description (â‰¤40 chars)"
    echo "Allowed types: feat, fix, docs, style, refactor, test, chore"
    exit 1
fi
